<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Willkommen</title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
  :root{
    --agave:#2e5d50;
    --bg1:#e7efe9;
    --bg2:#f4f1ea;
  }
  html,body{height:100%;}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
    background: radial-gradient(900px 500px at 50% 0%, rgba(46,93,80,.10), transparent 60%),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    display:grid;
    place-items:center;
    min-height:101vh; /* damit Safari-Leiste einklappt */
  }
  .card{
    width:min(520px,92vw);
    background:rgba(255,255,255,.70);
    border:1px solid rgba(0,0,0,.06);
    border-radius:22px;
    box-shadow:0 18px 50px rgba(0,0,0,.10);
    padding:22px 18px;
    text-align:center;
  }
  .title{font-size:22px;font-weight:900;margin:2px 0 6px;}
  .sub{opacity:.7;margin:0 0 14px;}
  .spinner{
    width:44px;height:44px;border-radius:999px;
    border:4px solid rgba(46,93,80,.18);
    border-top-color: rgba(46,93,80,.9);
    margin: 10px auto 2px;
    animation: spin 1s linear infinite;
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  .small{opacity:.65;font-size:13px;margin-top:10px}
</style>
</head>

<body>
  <div class="card">
    <div class="title">Einen Moment…</div>
    <p class="sub" id="msg">Verbindung wird geprüft</p>
    <div class="spinner" aria-hidden="true"></div>
    <div class="small">Falls nichts passiert: WLAN verbinden und erneut öffnen.</div>
  </div>

<script>
  // ====== HIER ANPASSEN ======
  const INTERNAL_URL = "http://192.168.178.10:8082/vis/guestbook/guestbook-wall.html";
  const QR_FALLBACK_URL = "index.html"; // deine QR-Seite auf GitHub Pages
  const TIMEOUT_MS = 2200;               // wie schnell fallbacken?
  // ==========================

  // Safari-Leiste einklappen
  setTimeout(() => window.scrollTo(0,1), 60);

  let left = false;
  window.addEventListener("pagehide", () => { left = true; });

  // Direkt versuchen intern zu öffnen
  setTimeout(() => {
    document.getElementById("msg").textContent = "Öffne interne Seite…";
    window.location.href = INTERNAL_URL;
  }, 200);

  // Wenn nicht geklappt: auf QR-Seite
  setTimeout(() => {
    if (!left) {
      document.getElementById("msg").textContent = "WLAN nicht verbunden – zeige QR-Code…";
      window.location.replace(QR_FALLBACK_URL);
    }
  }, TIMEOUT_MS);
</script>
</body>
</html>
