<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title></title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
  :root{
    --agave:#2e5d50;
    --agaveDark:#244d43;
    --gold:#c7a96b;
    --bg1:#e7efe9;
    --bg2:#f4f1ea;
    --ink:#1d2b27;
  }

  html,body{height:100%;}
  body{
    margin:0;
    min-height:101vh; /* Safari-Bar einklappen */
    overflow:hidden;
    display:grid;
    place-items:center;
    background:
      radial-gradient(900px 520px at 50% -10%, rgba(199,169,107,.20), transparent 62%),
      radial-gradient(820px 520px at 50% 0%, rgba(46,93,80,.14), transparent 62%),
      linear-gradient(180deg,var(--bg1),var(--bg2));
  }

  /* feines Korn */
  body::before{
    content:"";
    position:fixed; inset:-40px;
    background-image:
      radial-gradient(circle at 20% 30%, rgba(255,255,255,.08) 0 1px, transparent 2px),
      radial-gradient(circle at 60% 70%, rgba(0,0,0,.035) 0 1px, transparent 2px);
    background-size: 26px 26px;
    opacity:.30;
    pointer-events:none;
    filter: blur(.2px);
  }

  .stage{
    width:min(360px, 82vw);
    height:min(360px, 82vw);
    display:grid;
    place-items:center;
    position:relative;
  }

  .glass{
    position:absolute;
    inset:0;
    border-radius:999px;
    background:
      radial-gradient(circle at 50% 38%,
        rgba(255,255,255,.78),
        rgba(255,255,255,.46) 55%,
        rgba(255,255,255,0) 72%);
    border: 1px solid rgba(46,93,80,.10);
    box-shadow:
      0 26px 70px rgba(0,0,0,.10),
      inset 0 0 0 16px rgba(46,93,80,.03);
    backdrop-filter: blur(12px);
  }

  .halo{
    position:absolute;
    inset:-46px;
    border-radius:999px;
    background: radial-gradient(circle at 50% 50%,
      rgba(199,169,107,.22),
      rgba(46,93,80,.14),
      transparent 66%);
    filter: blur(12px);
    animation: halo 2.8s ease-in-out infinite;
    opacity:.9;
  }
  @keyframes halo{
    0%,100%{ transform: scale(.94); opacity:.70; }
    50%{ transform: scale(1.06); opacity:1; }
  }

  /* gold sweep */
  .sweep{
    position:absolute;
    width: 120%;
    height: 120%;
    border-radius:999px;
    background: conic-gradient(from 210deg,
      rgba(199,169,107,0) 0deg,
      rgba(199,169,107,.16) 34deg,
      rgba(199,169,107,0) 68deg,
      rgba(199,169,107,0) 360deg);
    filter: blur(1px);
    opacity:.55;
    mix-blend-mode:multiply;
    animation: sweep 3.4s linear infinite;
  }
  @keyframes sweep{ to{ transform: rotate(360deg); } }

  .wifi{
    width:220px;
    height:220px;
    display:grid;
    place-items:center;
    position:relative;
    transform: translateY(-2px);
  }

  /* SVG look */
  svg{
    width:150px;
    height:150px;
    filter: drop-shadow(0 14px 26px rgba(0,0,0,.14));
  }

  .arc{
    fill:none;
    stroke-linecap:round;
    stroke-width: 10;
    stroke: rgba(46,93,80,.90);
    opacity:.12;
    animation: pulse 1.7s ease-in-out infinite;
  }
  .arc.a2{ animation-delay:.18s; opacity:.18; }
  .arc.a3{ animation-delay:.36s; opacity:.24; }

  .dot{
    fill: rgba(46,93,80,.92);
    opacity:.30;
    animation: dot 1.7s ease-in-out infinite;
    animation-delay:.52s;
  }

  @keyframes pulse{
    0%{ opacity:.10; transform: scale(.985); }
    50%{ opacity:.90; transform: scale(1.03); }
    100%{ opacity:.12; transform: scale(.985); }
  }
  @keyframes dot{
    0%{ opacity:.20; transform: scale(.96); }
    55%{ opacity:1; transform: scale(1.08); }
    100%{ opacity:.25; transform: scale(.96); }
  }

  /* “Connect Sequenz”: kurz edler Gold-Akzent vor Redirect */
  .stage.go svg .arc{
    stroke: rgba(46,93,80,.92);
    filter: drop-shadow(0 0 10px rgba(199,169,107,.20));
  }
  .stage.go svg .dot{
    fill: rgba(199,169,107,.95);
    filter: drop-shadow(0 0 14px rgba(199,169,107,.30));
    opacity:.95;
  }
  .stage.go .sweep{ opacity:.85; }

  *{ -webkit-tap-highlight-color: transparent; user-select:none; }
</style>
</head>

<body>
  <div class="stage" id="stage" aria-label="Loading">
    <div class="halo"></div>
    <div class="sweep" aria-hidden="true"></div>
    <div class="glass" aria-hidden="true"></div>

    <div class="wifi" aria-hidden="true">
      <svg viewBox="0 0 200 200">
        <path class="arc a3" d="M35 90 Q100 35 165 90" />
        <path class="arc a2" d="M55 110 Q100 75 145 110" />
        <path class="arc a1 arc" d="M75 130 Q100 110 125 130" />
        <circle class="dot" cx="100" cy="150" r="10"/>
      </svg>
    </div>
  </div>

<script>
  // ====== HIER ANPASSEN ======
  const INTERNAL_URL = "http://192.168.178.10:8082/vis/guestbook/guestbook-wall.html";

  // Externes Fallback ist DEIN index.html (protected, braucht Token)
  const EXTERNAL_FALLBACK = "index1.html";

  // wie schnell fallbacken, wenn intern nicht klappt
  const TIMEOUT_MS = 3000;
  // ==========================

  const stage = document.getElementById("stage");

  // Safari-Leiste einklappen
  setTimeout(() => window.scrollTo(0,1), 60);

  function getTokenSuffix() {
    // übernimmt ?t=... oder #t=... 1:1
    const url = new URL(window.location.href);
    const q = url.searchParams.get("t");
    if (q) return "?t=" + encodeURIComponent(q);

    const h = (url.hash || "").replace(/^#/, "");
    if (!h) return "";
    const hp = new URLSearchParams(h);
    const ht = hp.get("t");
    if (ht) return "#t=" + encodeURIComponent(ht);

    // falls du noch andere hash-parameter nutzt, kannst du auch alles weiterreichen:
    // return "#" + h;
    return "";
  }

  const tokenSuffix = getTokenSuffix();

  let left = false;
  window.addEventListener("pagehide", () => { left = true; });

  // “connect sequenz”
  setTimeout(() => stage.classList.add("go"), 120);

  // intern versuchen
  setTimeout(() => {
    window.location.href = INTERNAL_URL;
  }, 2000);

  // fallback nach extern (index.html) MIT Token
  setTimeout(() => {
    if (!left) window.location.replace(EXTERNAL_FALLBACK + tokenSuffix);
  }, TIMEOUT_MS);
</script>
</body>
</html>
